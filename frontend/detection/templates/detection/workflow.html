{% extends 'detection/navigation.html' %}
{% load static %}

{% block image_model %}

<div class="row">
    <div class="container full" style="text-align: center;">
        {% if show_model %}
        <div id="imagecontainer" style="overflow: hidden; resize: vertical;">
        <img id="imagemodel" src="{% static 'detection/models/workflow.png' %}" class="responsive" alt="Model">
        </div>
        {% endif %}
        <div id="spinner" style="display: none" class="loader"></div>
        {% block content %}
        <h1>Patterns</h1>
        {% if patterns %}
        <table class="table">
            <tr>
                <th>Pattern Type</th>
                <th>Pattern Node</th>
                <th>Incoming Nodes</th>
                <th>Outgoing Nodes</th>
            </tr>
            {% for pattern in patterns %}
            <tr>
                <td>{{ pattern.pattern_type }}</td>
                <td>{{ pattern.pattern_node }}</td>
                <td>{{ pattern.incoming_nodes }}</td>
                <td>{{ pattern.outgoing_nodes }}</td>
            </tr>
            {% endfor %}
        </table>
        <script type="text/javascript">

            function exportJson(el) {
                False = false;
                True = true;
                pattern_data = {{ patterns|safe }};
                var data = "text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(pattern_data));
                // what to return in order to show download window?

                el.setAttribute("href", "data:" + data);
                el.setAttribute("download", "data.json");
            }
        </script>
        <a id="exportJSON" onmouseover="exportJson(this);" class="theme"><i class="theme"></i> Export Patterns</a>
        {% endif %}
        {% endblock %}
    </div>
</div>

{% endblock %}